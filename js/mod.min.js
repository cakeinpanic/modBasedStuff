(function(P){function B(a){for(var b=arguments.length,c=1;c<b;c++){var d=arguments[c];if(m(a)&&m(d))for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);else void 0!==d&&(a=d)}return a}function C(a){var b=arguments.length;m(a)||(a={});for(var c=1;c<b;c++){var d=arguments[c],e;if(m(d))for(var f in d)if(d.hasOwnProperty(f)){e=a[f];var k=d[f];m(k)?(e=m(e)?Array.isArray(e)?{}:e:Array.isArray(k)?Array.isArray(e)?e:[]:Array.isArray(k)?[]:{},a[f]=C(e,k)):a[f]=k}}return a}function m(a){return a&&null!==a&&"object"===
typeof a&&!(a instanceof Array)&&!a.nodeType}function n(a){return!(!a||!a.apply)}function w(a,b){for(var c=a.match(Q)||[""],d=0;d<c.length;d++)b(c[d].trim(),d)}function r(a,b,c){if(!c)return!1;w(b,function(b){var e=D(a,b),f=c;e.modifiers.forEach(function(a){/onc?e/.test(a)?f=x.one(e.evt,f):/delegate/.test(a)?(a=a.match(E)[1],f=x.delegate(e.evt,f,a)):/pass/.test(a)?(a=a.match(E)[1].split(R).map(F),f=x.pass(e.evt,f,a)):e.evt+=":"+a});if(h)h(e.src).on(e.evt,f);else e.src.addEventListener(e.evt,f)});
return a}function y(a,b,c){w(b,function(b){b=D(a,b);h?h(b.src).off(b.evt,c):b.src.removeEventListener(b.evt,c)});return a}function D(a,b){var c=b.match(/\w+(?:\:\w+(?:\(.+\))?)*$/)[0],d={};b=b.slice(0,-c.length).trim();d.src=S(a,b);c=T(c,"on").split(":");d.evt=c[0];d.modifiers=c.slice(1).sort(function(a,b){return/onc?e/.test(a)?1:-1});return d}function S(a,b){return b?"document"===b?p:"window"===b?u:"root"===b?z:"parent"===b?a.parentNode:"@"===b[0]?a[b.slice(1)]:/^[.#[]/.test(b)?p.querySelector(b):
a:a}function q(a,b,c,d){if(h){var e=h.Event(b);e.detail=c;h(a).triggerHandler(e)}else b instanceof Event?e=b:(e=p.createEvent("CustomEvent"),e.initCustomEvent(b,d,null,c)),a.dispatchEvent(e)}function A(a){var b;return/true/i.test(a)?!0:/false/i.test(a)?!1:/[^\d\.\-]/.test(a)||isNaN(b=parseFloat(a))?a:b}function U(a){if("string"!==typeof a)return[A(a)];a=a.trim();"["===a[0]&&(a=a.slice(1));1<a.length&&"]"===a[a.length-1]&&(a=a.slice(0,-1));var b=[];w(a,function(a){b.push(A(a))});return b}function F(a){return a.toUpperCase()}
function s(a){return(a+="")?F(a[0])+a.slice(1):a}function T(a,b){return a.slice(0,b.length)===b?a.slice(b.length).toLowerCase():a}function V(a){if(!a)return""+a;if(a instanceof Array)return a.join(",");if(a instanceof HTMLElement)return a.id;if(m(a))return JSON.stringify(a);if(n(a)){var b=a.toString();a.slice(b.indexOf("{")+1,b.lastIndexOf("}"))}else return a.toString()}function l(a,b){var c=this.constructor;a instanceof HTMLElement||(a&&!b&&(b=a),a=p.createElement("div"));if(a._mod){if(a._mod===
c)return a;c=c.extend(a._mod)}else c===l&&(c=l.extend());a._mod=c;a._id=c.instances.length;c.instances.push(a);c.displayName&&a.classList.add(c.displayName);var d=c.properties.init,e=c.properties.created,f={},k;for(k in c.properties)if("_"!==k[0])if(k in a)f[k]=a[k];else{var t=G(c.properties[k]).value,g=a.attributes[k]||a.attributes["data-"+k];if(g)if("on"===k.slice(0,2))f[k]=new Function(g.value);else{var h=f,W=k,g=g.value,H=void 0;if(t instanceof Array)g=U(g);else if("number"===typeof t)g=parseFloat(g);
else if("boolean"===typeof t)g=!/^(false|off|0)$/.test(g);else if(n(t))g=new Function(g);else if("string"!==typeof t){var v;if(m(t)){"{"!==g[0]&&(g="{"+g+"}");try{v=JSON.parse(g)}catch($){v={}}}else v=A(g);g=v}H=g;h[W]=H}}b=B(f,b);r(a,"init:one",d);r(a,"init:one",b.init);q(a,"init");a.__stateRedirectCount=0;I(a,"create",c.properties,b);for(k in b)c=b[k],n(c)&&!/^(created|init)$/.test(k)?r(a,k,c.bind(a)):void 0===c||k in a||(a[k]=c);r(a,"created:one",e);r(a,"created:one",b.created);q(a,"created");
return a}function I(a,b,c,d){if(c){var e=a["__"+b]=[];b=X(Object.keys(c),c);e.after=c.after;b.forEach(function(b){var f=G(c[b]),g=f.value;if("_"===b[0])a[b]=c[b];else if(n(g)||n(c[g])||n(a[g])){if(n(g))f=g.bind(a),a[b]=f.bind(a);else{f=c[g];n(f)||(f=a[g]);if(!n(f))throw Error("Bad callback name "+b);f=f.bind(a)}f.displayName=b;e.push(f);r(a,b,f);a._mod.displayName&&r(p,a._mod.displayName+":"+b,f)}else if(!(b in a)){var h="_"+b;h in a||(Object.defineProperty(a,b,{configurable:!1,enumerable:!0,get:function(a){return function(){return this[a]}}(h),
set:function(b,c,d){return function(e){var f=this[c];if(c in this){if(this[c]===e)return;this.__stateRedirectCount++;if(this.__stateRedirectCount>=l._maxRedirects)throw Error("Too many redirects in "+b);if(d.values){var g=d.values[f]?f:"_",g=b+s(g);if(!this["__after"+g]){this["__after"+g]=!0;var k=Y(this,g);if(!1===k)return;if(void 0!==k){this[b]=k;return}q(this,"after"+s(b)+s(f));this["__after"+g]=null}}}if(this[c]===f){this[c]=e;var h;if(d.values){if(g=d.values[e]?e:"_",h=d.values[g],h=n(h)?h.call(a):
I(this,b+s(g),h),q(this,b+s(e)),void 0!==h){this[b]=!1===h?f:h;return}}else if(d.change&&!this["__change"+b]){this["__change"+b]=!0;try{h=d.change.call(this,e,f)}catch(m){throw this[c]=f,Error(m);}!1===h?this[c]=f:void 0!==h&&(this[c]=h);this["__change"+b]=null}d.attribute&&(e?this.setAttribute(b,V(e)):this.removeAttribute(b),q(this,"attributeChanged"));q(this,b+"Changed",{key:b,value:e,oldValue:f});this.__stateRedirectCount=0}}}(b,h,f)}),a._mod.displayName&&(f=function(b){b=b.originalEvent||b;b.detail.value&&
(a[b.type.split(":")[1]]=b.detail.value)}.bind(a),f.displayName=b,e.push(f),r(p,a._mod.displayName+":"+b,f)));a[b]=d&&b in d?d[b]:g}});var f;c.before&&(f=c.before.call(a));return f}}function Y(a,b,c){b=a["__"+b];var d;if(b){if(b.after&&(d=b.after.call(a),!1===d))return!1;b.forEach(function(b){y(a,b.displayName,b);a._mod.displayName&&y(p,a._mod.displayName+":"+b.displayName,b)});b.length=0}Z&&console.groupEnd();return d}function J(a,b){b=b||z;var c=a.settings.selector;K.call(b,c)&&(new a(b),q(b,"attached"));
for(var c=b.querySelectorAll(c),d=0;d<c.length;d++)new a(c[d]),q(c[d],"attached")}function X(a,b){return a.filter(function(a){return!/^(?:init|before|after|created)$/.test(a)}).sort(function(a,d){return L(a,b[a])>L(d,b[d])?1:-1})}function L(a,b){return"_"===a[0]?0:b?void 0!==b.order?b.order:n(b)?1:m(b)?"change"in b?4:"values"in b?5:3:2:1}function G(a){return m(a)?a.hasOwnProperty("values")||"value"in a||a.change?a:{value:a}:{value:a}}var u=window,p=document,z=p.documentElement,M=function(){var a=
u.getComputedStyle(z,""),a=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||""===a.OLink&&["","o"])[1];return{dom:"ms"==a?"MS":a,css:"-"+a+"-",lowercase:a,js:"ms"==a?a:s(a)}}(),N=u.MutationObserver||u[M.js+"MutationObserver"],K=Element.prototype.matchesSelector||Element.prototype[M.lowercase+"MatchesSelector"],h="undefined"!==typeof h&&h||"undefined"!==typeof jQuery&&jQuery||void 0,O={ENTER:13,ESCAPE:27,TAB:9,ALT:18,CTRL:17,SHIFT:16,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,
LEFT:37,UP:38,RIGHT:39,DOWN:40,LEFT_MOUSE:1,RIGHT_MOUSE:3,MIDDLE_MOUSE:2},R=/\s*,\s*/,Q=/([^,]+?(?:\([^()]+\))?)(?=,|$)/g,E=/\(([^)]*)\)/,x={one:function(a,b){var c=function(){var d=b.apply(this,arguments);!1!==d&&y(this,a,c);return d};return c},pass:function(a,b,c){return function(a){var e=!1;c.forEach(function(b){if(b in O&&O[b]==a.which||a.which==b)e=!0});return e?b.apply(this,arguments):!1}},delegate:function(a,b,c){return function(a){return K.call(a.target,c)?b.apply(this,arguments):!1}}},Z=
!1;l.extend=function(a){function b(){return l.apply(this,arguments)}a=a||{};a=a.properties||a;b.instances=[];b.extend=l.extend;b.register=l.register;b.properties={};C(b.properties,this.properties,a);return b};l._maxRedirects=10;l.registry={};l.register=function(a,b){if(!a||this===l)throw Error("Bad arguments");b=B({jQuery:a,customElement:a,selector:"."+a},b);l.registry[a]=this;this.displayName=a;this.settings=b;!h||!b.jQuery||b.jQuery in h||(h.fn[a]=function(b){return function(d){return this.each(function(e,
f){var k=h(f),l=new b(k[0],d);k.data(a,l)})}}(this),h[a]=this);J(this);return this};N&&(new N(function(a){a.forEach(function(a){if("attributes"!==a.type&&"childList"===a.type)for(var c=a.addedNodes.length,d=0;d<c;d++){var e=a.addedNodes[d];if(1===e.nodeType){e._mod&&!e._mod.displayName&&q(e,"attached");for(var f in l.registry)J(l.registry[f],e)}}})})).observe(p,{attributes:!0,childList:!0,subtree:!0,characterData:!0});(function(a,b){"function"===typeof define&&define.amd?define(b):"object"===typeof exports?
module.exports=b():a.Mod=b()})(P,function(){return l})})(this);
